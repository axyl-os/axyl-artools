#!/bin/bash
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

VERSION=@version@

VERSION=0.10.4.r2.gd0e3c4e

if [[ -f "$1"/PKGBUILD ]]; then
    LIBRARY=${LIBRARY:-'/usr/share/makepkg'}

    for lib in "$LIBRARY"/*.sh; do
        source "$lib"
    done
    . /etc/makepkg.conf

    . "$1"/PKGBUILD

    pkgfile=$(print_all_package_names)
fi

NL=$'\n'

Yaml="%YAML 1.2"$NL
Yaml+="---"$NL

Yaml+="pkgfile:"$NL
for f in ${pkgfile[@]};do
    Yaml+="  - ${f##*/}"$NL
done

Yaml+="pkgname:"$NL
for n in ${pkgname[@]};do
    Yaml+="  - ${n##*/}"$NL
done

printf '%s' "${Yaml}"
